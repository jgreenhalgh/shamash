
<!DOCTYPE html>
<html lang="en">
<head>
<style>
.highlight { background:yellow; }
</style>
	<meta charset="utf-8" />
<script src="//maps.google.com/maps?file=api&amp;v=2&amp;sensor=false&amp;key=AIzaSyAZcXhfzbbDh5SayEibA0I2sBa7dvpnR5k"
            type="text/javascript"></script>
	
				<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;key=AIzaSyAZcXhfzbbDh5SayEibA0I2sBa7dvpnR5k"></script>


	<script type="text/javascript" src="https://raw.github.com/dilab/v3-polygon-shape-creator/master/demo/polygon.min.js"></script>



	
	<script type="text/javascript">
	$(function(){
		//this script is for loading the map at the correct coordinates and drawing the polygon on it

		 var geocoder = new GClientGeocoder();
		 var address = "{{selected_address}}";
		 
		  //create map
		 
		 var point = geocoder.getLatLng(address, function(point) {
         var latitude = point.y;
         var longitude = point.x;  

    	 

		 var customer_location = new google.maps.LatLng(latitude, longitude);
		 var myOptions = {
		  	zoom: 18,
		  	center: customer_location,
		  	mapTypeId: google.maps.MapTypeId.HYBRID
		  }
		 map = new google.maps.Map(document.getElementById('niko'), myOptions);
		 
		 var creator = new PolygonCreator(map);
         var my_polygon = creator.pen.polygon;
		 
		 //reset
		 $('#reset').click(function(){ 
		 		creator.destroy();
		 		creator=null;
		 		
		 		creator=new PolygonCreator(map);
		 });		 
		 
		 
		 

		//get data to transfer to server
		$('#sendData').click(function(){ 
		 		$('#dataPanel').empty();
		 		if(null==creator.showData()){
		 			$('#dataPanel').append('Please first create a polygon');
		 		}else{


                        var LatLng = new Array();
                        var Dist = new Array();
                        var Head = new Array();

                        var coordinates = creator.showData().match(/[0-9.]+/g);
                        for(var i=0; i <(coordinates.length)/2; i++)
                        {
                            LatLng[i] = new google.maps.LatLng(coordinates[2*i], coordinates[2*i+1]);
                            if (i>0)
                            {
                                Dist[i-1]= google.maps.geometry.spherical.computeDistanceBetween(LatLng[i-1],LatLng[i]);
                                Head[i-1]= google.maps.geometry.spherical.computeHeading(LatLng[i-1],LatLng[i]);
                            }
                        }

                        var area = google.maps.geometry.spherical.computeArea(LatLng);
						$('#geoData').append('<input type="hidden" name="coordinates" value="' +coordinates+'">');                    
                        $('#geoData').append('<input type="hidden" name="area" value="' +area+'">');              
                        $('#geoData').append('<input type="hidden" name="distances" value="' +Dist+'">');      
                        $('#geoData').append('<input type="hidden" name="headings" value="' +Head+'">');                    


                        alert(address );
		 		}
		 });
		

		})


	});	
	</script>



</head>

	<title>Startseite</title>
	<link rel="stylesheet" href="../static/normalize.css" />
	<link rel='stylesheet' href="../static/style.css" />
	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:900italic' rel='stylesheet' type='text/css'>
	<link rel='stylesheet' href="../static/960.css" />
	
	<script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript"></script>
	<script src="../static/toggle.js" type="text/javascript"></script>
	

<body id="startbg_sub">
	
	<div id="header_bg_wrapper_subsite">	
		<!-- Logo + Navigation -->
		<div class="container_12 verschieben_subsite">
			<div class="grid_2 logotopsubsite"><img src="../static/logo_black.png" /></div>
			<div class="grid_7">
			<ul class="topnavigation_sub">
				<li class="topnavigation_sub litopwas_sub"><a href="#">Was ist SolarRepublic?</a></li>
				<li class="topnavigation_sub litopsolardach_sub"><a href="#">Solardachrechner</a></li>
				<li class="topnavigation_sub litopvergleich_sub"><a href="#">Anbieter vergleichen</a></li>
			</ul>
			</div>
			
			<!-- Login + Register -->
			<div class="grid_3">
			<ul class="loginregisternav_sub">
				<li class="loginregisternav_sub"><a href="#">Registrieren</a></li>
				<li class="loginregisternav_sub"><a class="einloggennav_sub" href="#">Einloggen</a></li>
			</ul>
			</div>	
		</div>
	</div>
	
	
	
	<!-- STEP Uebersicht -->
	<div id="step1_4_container">
		<div class="container_12">

		<div class="grid_3">
				<span class="stepnumber">1</span> <a href="#" class="nodecoration">Dach ausw&auml;hlen</a>
			</div>
			
			<div class="grid_3">
				<span class="stepnumber">2</span> <a href="#" class="nodecoration">Details eingeben</a>
			</div>
				<span class="stepnumber">3</span> <a href="#" class="nodecoration">Potential berechnen</a>
			<div class="grid_3">
			</div>
			<div class="grid_3">
				<span class="stepnumber">4</span> <a href="#" class="nodecoration">Anbieter vergleichen</a>
			</div>
		</div>
	</div>
	
	
	<div class="container_12" id="contentbereich">
	
	<!-- Suchresultate fuer -->
	<div id="suchresultatfuer">
		<h2>Wir haben die berechent f&uuml;r <input type="text" class="step2_input_strasse" value="{{selected_address}}"></input> berechnet:</h2>
	</div>
	
		<div class="grid_4">
		

			
			<div class="step2_wastun_todo" >
				<h3 class="toggle" id="navigieren"><img src="../static/step2_checked.png" style="float:right;" />Navigieren Sie zu Ihrem Dach im Kartenausschnitt rechts. </h3>
				<p class="toggle_this">Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</p>
			</div>
			
			<div class="step2_wastun_todo">
				<h3 class="toggle"><img src="../static/arrow_blue_down.png" style="float:right;" />W&auml;hlen Sie Ihre Dachfl&auml;che aus </h3>
				<p class="toggle_this">Hier kommt die Beschreibung hin, wie man sein Dach markiert.</p>
			</div>
			
			<div class="step2_wastun_todo">
				<h3 class="toggle"><img src="../static/arrow_gray_left.png" style="float:right;" />Navigieren Sie zu Ihrem Dach im Kartenausschnitt rechts. </h3>
				<p class="toggle_this">Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</p>
			</div>			
		
			<div class="step2_wastun_todo">
				<h3><img src="../static/arrow_gray_left.png" style="float:right;" />Navigieren Sie zu Ihrem Dach im Kartenausschnitt rechts. </h3>
				<p>Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</p>
			</div>		

			<div class="step2_wastun_todo">
				<h3><img src="../static/arrow_gray_left.png" style="float:right;" />Navigieren Sie zu Ihrem Dach im Kartenausschnitt rechts. </h3>
				<p>Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</p>
			</div>		
			
		</div>
    <div class="grid_8" id="niko">

	</div>






		<form action="/project/results/" method="post">
		{% csrf_token %}
		<div   id="geoData" style="float:right;">
               

		<input id="sendData" type="submit" value="Weiter" class="navi" />
        </div>
        </form>
	</div>
</body>
</html>
